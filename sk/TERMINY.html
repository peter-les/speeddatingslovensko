<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>TERMÍNY</title>
  <style>
    body {
      background-color: #4CAF50;
      color: black;
      text-align: center;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    h1, h2, p, ul, li {
      text-align: center;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    a {
      color: blue;
      text-decoration: none;
      margin: 0 10px;
    }
    a:hover {
      text-decoration: underline;
    }
    img {
      width: 200px;
      height: auto;
      display: block;
      margin: 20px auto;
      border-radius: 10px;
    }
    nav {
      background-color: black;
      color: white;
      padding: 10px 0;
    }
    nav a {
      color: white;
      margin: 0 15px;
    }
    footer {
      background-color: black;
      color: white;
      padding: 10px 0;
      position: relative;
      bottom: 0;
      width: 100%;
    }
    .columns {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      padding: 20px;
      background-color: #4CAF50;
    }
    .column {
      flex: 0 0 300px;
      text-align: center;
      background-color: #4CAF50;
      padding: 10px;
      border-radius: 10px;
    }
    input, select, button {
      margin-top: 5px;
      padding: 5px;
      width: 90%;
      font-size: 1em;
    }
    button {
      cursor: pointer;
    }
  </style>
</head>
<body>

<nav>
  <a href="index.html">Domov</a> |
  <a href="AKO_TO_PREBIEHA.html">Ako to prebieha?</a> |
  <a href="TERMINY.html">Termíny</a> |
  <a href="O_NAS.html">O nás</a>
</nav>

<hr>

<h1>NASLEDUJÚCE TERMÍNY:</h1>

<div class="columns">

  <!-- 26-36 rokov -->
  <div class="column">
    <h2>Veková skupina 26-36 rokov (PIATKY VEČER)</h2>
    <ul>
      <li>
        <strong>Dátum:</strong> ...<br>
        <strong>Čas:</strong> 18:00 - 19:00<br>
        <strong>Adresa:</strong> ...<br>
        <strong>Mesto:</strong> Bratislava
      </li>
    </ul>
    <p>Počet voľných miest: <span id="free26_36">0</span></p>
    <p>Ženy platia 0 €, muži 9,90 €</p>
    <a href="STRIPE_LINK_MUZI_26_36" target="_blank">Muži zaplaťte 9,90 €</a>

    <form id="reg26_36">
      <input type="text" name="meno" placeholder="Krstné meno" required><br>
      <input type="number" name="vek" placeholder="Vek" required><br>
      <select name="pohlavie" required>
        <option value="">Pohlavie</option>
        <option value="muz">Muž</option>
        <option value="zena">Žena</option>
      </select><br>
      <button type="submit">Registrovať sa</button>
    </form>
  </div>

  <!-- 36-46 rokov -->
  <div class="column">
    <h2>Veková skupina 36-46 rokov (SOBOTY VEČER)</h2>
    <ul>
      <li>
        <strong>Dátum:</strong> ...<br>
        <strong>Čas:</strong> 18:00 - 19:00<br>
        <strong>Adresa:</strong> ...<br>
        <strong>Mesto:</strong> Bratislava
      </li>
    </ul>
    <p>Počet voľných miest: <span id="free36_46">0</span></p>
    <p>Muži aj ženy platia 9,90 €</p>
    <a href="STRIPE_LINK_VSETCI_36_46" target="_blank">Zaplaťte 9,90 €</a>

    <form id="reg36_46">
      <input type="text" name="meno" placeholder="Krstné meno" required><br>
      <input type="number" name="vek" placeholder="Vek" required><br>
      <select name="pohlavie" required>
        <option value="">Pohlavie</option>
        <option value="muz">Muž</option>
        <option value="zena">Žena</option>
      </select><br>
      <button type="submit">Registrovať sa</button>
    </form>
  </div>

</div>

<p>
  <a href="index.html">Naspäť</a>
</p>

<footer>
  <p>
    Kontakt:
    <a href="mailto:bratislavaspeeddating@gmail.com">bratislavaspeeddating@gmail.com</a><br>
    <a href="OBCHODNE_PODMIENKY.html">Obchodné podmienky</a> |
    <a href="OCHRANA_OSOBNYCH_UDAJOV.html">Ochrana osobných údajov</a>
  </p>
</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // Firebase config - doplň svoje údaje
  const firebaseConfig = {
    apiKey: "TU_DAS_API_KEY",
    authDomain: "TU_DAS_AUTH_DOMAIN",
    databaseURL: "TU_DAS_DATABASE_URL",
    projectId: "TU_DAS_PROJECT_ID",
    storageBucket: "TU_DAS_BUCKET",
    messagingSenderId: "TU_DAS_SENDER_ID",
    appId: "TU_DAS_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Počet voľných miest
  const free26_36El = document.getElementById('free26_36');
  const free36_46El = document.getElementById('free36_46');

  const updateCounter = (el, path) => {
    const ref = db.ref(path);
    ref.on('value', snapshot => {
      el.textContent = snapshot.val() || 0;
    });
  };

  updateCounter(free26_36El, 'volne_miesta_26_36');
  updateCounter(free36_46El, 'volne_miesta_36_46');

  // Registrácia
  const register = (formId, dbPath, maxPlacesPath) => {
    const form = document.getElementById(formId);
    form.addEventListener('submit', e => {
      e.preventDefault();
      const data = {
        meno: form.meno.value,
        vek: form.vek.value,
        pohlavie: form.pohlavie.value,
        cas: new Date().toISOString()
      };
      db.ref(dbPath).push(data);

      // Zníženie počtu voľných miest
      const counterRef = db.ref(maxPlacesPath);
      counterRef.transaction(current => {
        return (current || 0) - 1;
      });

      form.reset();
      alert('Registrácia bola úspešná!');
    });
  };

  register('reg26_36', 'registracie_26_36', 'volne_miesta_26_36');
  register('reg36_46', 'registracie_36_46', 'volne_miesta_36_46');
</script>

</body>
</html>
