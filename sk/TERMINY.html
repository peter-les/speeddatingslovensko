<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>TERMÍNY - Speed Dating Bratislava</title>
  <!-- CSS -->
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #4CAF50;
      color: black;
      text-align: center;
    }
    a {
      color: white;
      text-decoration: none;
      margin: 0 10px;
    }
    a:hover {
      text-decoration: underline;
    }
    .top-bar, .bottom-bar {
      background-color: black;
      color: white;
      padding: 10px;
    }
    nav a {
      color: white;
      margin: 0 15px;
    }
    .container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      padding: 20px;
      background-color: #4CAF50;
    }
    .event-column {
      background-color: #4CAF50;
      padding: 15px;
      border-radius: 10px;
      flex: 0 0 auto;
      width: 300px;
      box-sizing: border-box;
      text-align: center;
    }
    input[type="text"], input[type="number"], select {
      padding: 5px;
      margin: 5px 0;
      width: 90%;
      box-sizing: border-box;
    }
    input[type="submit"] {
      padding: 8px 15px;
      margin-top: 10px;
      cursor: pointer;
    }
    .free-spots {
      font-weight: bold;
      font-size: 1.2em;
      margin-bottom: 10px;
    }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    // TODO: zmeň tieto údaje za svoje Firebase projekt údaje
    const firebaseConfig = {
      apiKey: "TVOJE_API_KEY",
      authDomain: "TVOJ_PROJEKT.firebaseapp.com",
      databaseURL: "https://TVOJ_PROJEKT.firebaseio.com",
      projectId: "TVOJ_PROJEKT",
      storageBucket: "TVOJ_PROJEKT.appspot.com",
      messagingSenderId: "TVOJ_SENDER_ID",
      appId: "TVOJ_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function updateFreeSpots(group) {
      const spotsRef = db.ref('events/' + group + '/freeSpots');
      spotsRef.on('value', (snapshot) => {
        const freeSpots = snapshot.val();
        document.getElementById(group + '-spots').textContent = freeSpots;
      });
    }

    function registerParticipant(group) {
      const name = document.getElementById(group + '-name').value;
      const age = document.getElementById(group + '-age').value;
      const gender = document.getElementById(group + '-gender').value;

      if (!name || !age || !gender) {
        alert("Vyplňte všetky údaje!");
        return false;
      }

      const participantRef = db.ref('events/' + group + '/participants');
      participantRef.push({
        name: name,
        age: age,
        gender: gender,
        timestamp: Date.now()
      });

      const spotsRef = db.ref('events/' + group + '/freeSpots');
      spotsRef.transaction((current) => {
        if (current > 0) return current - 1;
        else return 0;
      });

      alert("Registrácia prebehla úspešne!");
      document.getElementById(group + '-form').reset();
      return false;
    }

    window.onload = function() {
      updateFreeSpots('group1');
      updateFreeSpots('group2');
    }
  </script>
</head>
<body>

<!-- Top bar -->
<div class="top-bar">
  <a href="index.html">Domov</a> |
  <a href="AKO_TO_PREBIEHA.html">Ako to prebieha</a> |
  <a href="TERMINY.html">Termíny</a> |
  <a href="O_NAS.html">O nás</a>
</div>
<hr>

<h1>Nasledujúce termíny</h1>

<div class="container">

  <!-- Skupina 26-36 rokov -->
  <div class="event-column">
    <h2>26-36 rokov (Piatky večer)</h2>
    <p class="free-spots">Voľné miesta: <span id="group1-spots">0</span></p>
    <form id="group1-form" onsubmit="return registerParticipant('group1')">
      <input type="text" id="group1-name" placeholder="Krstné meno"><br>
      <input type="number" id="group1-age" placeholder="Vek"><br>
      <select id="group1-gender">
        <option value="">Pohlavie</option>
        <option value="muž">Muž</option>
        <option value="žena">Žena</option>
      </select><br>
      <input type="submit" value="Registrovať">
    </form>
    <p>
      <a href="https://buy.stripe.com/test_7sY9AS2ObfKh2mH2Crc7u00" target="_blank">
        Zaplať za Speed Dating
      </a>
    </p>
  </div>

  <!-- Skupina 36-46 rokov -->
  <div class="event-column">
    <h2>36-46 rokov (Soboty večer)</h2>
    <p class="free-spots">Voľné miesta: <span id="group2-spots">0</span></p>
    <form id="group2-form" onsubmit="return registerParticipant('group2')">
      <input type="text" id="group2-name" placeholder="Krstné meno"><br>
      <input type="number" id="group2-age" placeholder="Vek"><br>
      <select id="group2-gender">
        <option value="">Pohlavie</option>
        <option value="muž">Muž</option>
        <option value="žena">Žena</option>
      </select><br>
      <input type="submit" value="Registrovať">
    </form>
    <p>
      <a href="https://buy.stripe.com/test_7sY9AS2ObfKh2mH2Crc7u00" target="_blank">
        Zaplať za Speed Dating
      </a>
    </p>
  </div>

</div>

<!-- Bottom bar -->
<div class="bottom-bar">
  Kontakt: <a href="mailto:bratislavaspeeddating@gmail.com">bratislavaspeeddating@gmail.com</a> |
  <a href="OBCHODNE_PODMIENKY.html">Obchodné podmienky</a> |
  <a href="OCHRANA_OSOBNYCH_UDAJOV.html">Ochrana osobných údajov</a>
</div>

</body>
</html>
