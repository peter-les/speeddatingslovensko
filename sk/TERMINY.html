<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <title>TERMÍNY - Speed Dating Bratislava</title>
  <!-- CSS -->
  <style>
    body {
      background-color: #4CAF50;
      color: black;
      text-align: center;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    h1, h2, p, ul, li {
      text-align: center;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    a {
      color: blue;
      text-decoration: none;
      margin: 0 10px;
    }
    a:hover {
      text-decoration: underline;
    }
    img {
      width: 200px;
      height: auto;
      display: block;
      margin: 20px auto;
      border-radius: 10px;
    }
    nav {
      background-color: black;
      color: white;
      padding: 10px;
    }
    nav a {
      color: white;
      margin: 0 15px;
    }
    nav a:hover {
      text-decoration: underline;
    }
    footer {
      background-color: black;
      color: white;
      padding: 10px;
      position: relative;
      bottom: 0;
      width: 100%;
    }
    footer a {
      color: white;
      text-decoration: none;
      margin: 0 10px;
    }
    footer a:hover {
      text-decoration: underline;
    }
    .termin-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background-color: #4CAF50;
      padding: 20px;
    }
    .termin-column {
      text-align: center;
      flex: 0 0 auto;
      margin: 0 20px;
      background-color: #4CAF50;
      padding: 10px;
      border-radius: 10px;
    }
    .counter {
      font-weight: bold;
      margin: 5px 0;
    }
    button {
      margin-top: 10px;
      padding: 8px 15px;
      font-size: 1em;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    // Firebase config - vlož svoje údaje
    const firebaseConfig = {
      apiKey: "TU_DAS_API_KEY",
      authDomain: "TU_DAS_AUTH_DOMAIN",
      databaseURL: "TU_DAS_DATABASE_URL",
      projectId: "TU_DAS_PROJECT_ID",
      storageBucket: "TU_DAS_BUCKET",
      messagingSenderId: "TU_DAS_SENDER_ID",
      appId: "TU_DAS_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Funkcia na načítanie počtu voľných miest
    function updateCounters() {
      db.ref('volne_miesta_26_36').once('value', snap => {
        const data = snap.val();
        document.getElementById('free26_muz').innerText = data.muzi;
        document.getElementById('free26_zena').innerText = data.zeny;
      });
      db.ref('volne_miesta_36_46').once('value', snap => {
        const data = snap.val();
        document.getElementById('free36_muz').innerText = data.muzi;
        document.getElementById('free36_zena').innerText = data.zeny;
      });
    }

    // Funkcia na registráciu
    function register(ageGroup, gender) {
      const name = prompt("Zadaj krstné meno:");
      if (!name) return;

      const regRef = db.ref(`registracie_${ageGroup}`);
      const countRef = db.ref(`volne_miesta_${ageGroup}`);

      // Skontroluj, či sú voľné miesta
      countRef.once('value', snap => {
        const counts = snap.val();
        if (counts[gender] > 0) {
          // Ulož registráciu
          const newReg = regRef.push();
          newReg.set({name: name, gender: gender, timestamp: Date.now()});

          // Zníž počet voľných miest
          counts[gender] -= 1;
          countRef.set(counts);

          updateCounters();

          // Stripe link pre platenie
          if ((ageGroup == '26_36' && gender == 'muzi') || ageGroup == '36_46') {
            const stripeLink = 'TU_DAS_STRIPE_LINK';
            window.open(stripeLink, '_blank');
          } else {
            alert('Registrácia prebehla zdarma!');
          }

        } else {
          alert('Žiadne voľné miesta pre túto kategóriu a pohlavie.');
        }
      });
    }

    window.onload = function() {
      updateCounters();
    }
  </script>
</head>
<body>

<nav>
  <a href="index.html">Domov</a>
  <a href="AKO_TO_PREBIEHA.html">Ako to prebieha</a>
  <a href="TERMINY.html">Termíny</a>
  <a href="O_NAS.html">O nás</a>
</nav>

<hr>
<h1>NASLEDUJÚCE TERMÍNY:</h1>

<div class="termin-container">

  <!-- Piatok 26-36 -->
  <div class="termin-column">
    <h2>Vek 26-36 rokov (Piatky večer)</h2>
    <ul>
      <li>
        <strong>Dátum:</strong> ...<br>
        <strong>Čas:</strong> 18:00 - 19:00<br>
        <strong>Adresa:</strong> ...<br>
        <strong>Mesto:</strong> Bratislava
      </li>
    </ul>
    <div class="counter">
      Voľné miesta – muži: <span id="free26_muz">0</span> | ženy: <span id="free26_zena">0</span>
    </div>
    <button onclick="register('26_36','muzi')">Registrovať sa – Muži 9,90€</button><br>
    <button onclick="register('26_36','zeny')">Registrovať sa – Ženy zdarma</button>
  </div>

  <!-- Sobota 36-46 -->
  <div class="termin-column">
    <h2>Vek 36-46 rokov (Soboty večer)</h2>
    <ul>
      <li>
        <strong>Dátum:</strong> ...<br>
        <strong>Čas:</strong> 18:00 - 19:00<br>
        <strong>Adresa:</strong> ...<br>
        <strong>Mesto:</strong> Bratislava
      </li>
    </ul>
    <div class="counter">
      Voľné miesta – muži: <span id="free36_muz">0</span> | ženy: <span id="free36_zena">0</span>
    </div>
    <button onclick="register('36_46','muzi')">Registrovať sa – Muži 9,90€</button><br>
    <button onclick="register('36_46','zeny')">Registrovať sa – Ženy 9,90€</button>
  </div>

</div>

<footer>
  Kontakt:
  <a href="mailto:bratislavaspeeddating@gmail.com">bratislavaspeeddating@gmail.com</a> |
  <a href="OBCHODNE_PODMIENKY.html">Obchodné podmienky</a> |
  <a href="OCHRANA_OSOBNYCH_UDAJOV.html">Ochrana osobných údajov</a>
</footer>

</body>
</html>
